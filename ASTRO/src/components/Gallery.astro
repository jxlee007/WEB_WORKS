---
// Gallery.astro - an interactive Astro island (initialization runs on client)
// Props: images: Array<{src:string, thumb:string, alt?:string}>
const uid = Math.random().toString(36).slice(2, 9);
export interface Props {
  images?: { src: string; thumb?: string; alt?: string }[];
}
export const imagesDefault = [
  { src: '/thumb-gallery/FORD-GT-PM800.jpg', thumb: '/thumb-gallery/FORD-GT-PM800 small.jpg', alt: 'FORD GT 1' },
  { src: '/thumb-gallery/FordGT-WideAll.jpg', thumb: '/thumb-gallery/FordGT-WideAll small.jpg', alt: 'FORD GT 2' },
  { src: '/thumb-gallery/FordGT-CUlarge-Solo.jpg', thumb: '/thumb-gallery/FordGT-CUSmall-Solo.jpg', alt: 'FORD GT 3' },
  { src: '/thumb-gallery/FordGT-CUMED-Solo.jpg', thumb: '/thumb-gallery/FordGT-CUMED-Solo small.jpg', alt: 'FORD GT 4' },
  { src: '/thumb-gallery/FordGT-WideLarge-Solo.jpg', thumb: '/thumb-gallery/FordGT-WideLarge-Solo small.jpg', alt: 'FORD GT 5' },
];

const { images = imagesDefault } = Astro.props as Props & { images?: typeof imagesDefault };
---

<div id={`gallery-${uid}`} class="gallery-island max-w-4xl mx-auto">
  <div class="flex flex-col md:flex-row gap-6 items-start">
    <!-- Right: text / details slot (optional) -->
    <div class="w-full md:w-1/2">
      <slot name="meta">
        <!-- default metadata slot left empty so consumer can provide content -->
      </slot>
    </div>

    <!-- Left: sliders -->
    <div class="w-full md:w-1/2">
      <div class="relative">
        <div class="swiper mySwiper2 rounded-lg overflow-hidden bg-gray-900/5">
          <div class="swiper-wrapper">
            {images.map((img) => (
              <div class="swiper-slide flex items-center justify-center bg-gray-100">
                <img src={img.src} alt={img.alt ?? ''} class="object-contain w-full h-[40vh] md:h-[50vh]" />
              </div>
            ))}
          </div>

          <button class="swiper-button-next text-white/90"></button>
          <button class="swiper-button-prev text-white/90"></button>
        </div>

        <div class="mt-4 swiper mySwiper grid grid-cols-4 gap-2">
          <div class="swiper-wrapper col-span-4 flex gap-2">
            {images.map((img) => (
              <div class="swiper-slide shrink-0 w-20 h-16 overflow-hidden rounded-md border border-gray-200">
                <img src={img.thumb ?? img.src} alt={img.alt ?? ''} class="w-full h-full object-cover" />
              </div>
            ))}
          </div>
        </div>
      </div>
    </div>
  </div>
</div>